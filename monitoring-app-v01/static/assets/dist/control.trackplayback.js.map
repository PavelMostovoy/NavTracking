{"version":3,"file":"control.trackplayback.js","mappings":"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","sources":["webpack://leaflet-plugin-trackplayback/webpack/universalModuleDefinition","webpack://leaflet-plugin-trackplayback/external umd {\"root\":\"L\",\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\",\"amd\":\"leaflet\"}","webpack://leaflet-plugin-trackplayback/webpack/bootstrap","webpack://leaflet-plugin-trackplayback/webpack/runtime/compat get default export","webpack://leaflet-plugin-trackplayback/webpack/runtime/define property getters","webpack://leaflet-plugin-trackplayback/webpack/runtime/hasOwnProperty shorthand","webpack://leaflet-plugin-trackplayback/./src/control.trackplayback/control.playback.js","webpack://leaflet-plugin-trackplayback/./src/control.trackplayback/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"leaflet\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"leaflet\")) : factory(root[\"L\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, (__WEBPACK_EXTERNAL_MODULE__421__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__421__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import L from 'leaflet'\n\n/**\n * TrackPlayBackControl - A Leaflet control for track playback\n *\n * Options:\n * - position: Position of the control (default: 'topright')\n * - showOptions: Whether to show the options container (default: true)\n * - showInfo: Whether to show the info container (default: true)\n * - showSlider: Whether to show the slider container (default: true)\n */\nexport const TrackPlayBackControl = L.Control.extend({\n\n  options: {\n    position: 'topright',\n    showOptions: true,\n    showInfo: true,\n    showSlider: true\n  },\n\n  initialize: function (trackplayback, options) {\n    L.Control.prototype.initialize.call(this, options)\n    this.trackPlayBack = trackplayback\n    this.trackPlayBack.on('tick', this._tickCallback, this)\n  },\n\n  onAdd: function (map) {\n    this._initContainer()\n    return this._container\n  },\n\n  onRemove: function (map) {\n    this.trackPlayBack.dispose()\n    this.trackPlayBack.off('tick', this._tickCallback, this)\n  },\n\n  /**\n   * Get time string from unix timestamp (unit: seconds)\n   * @param  {[int]} time     [timestamp (accurate to seconds)]\n   * @param  {[string]} accuracy [precision, day: d, hour: h, minute: m, second: s]\n   * @return {[string]}          [yy:mm:dd hh:mm:ss]\n   */\n  getTimeStrFromUnix: function (time, accuracy = 's') {\n    time = parseInt(time * 1000)\n    const newDate = new Date(time)\n    const year = newDate.getFullYear()\n    const month = (newDate.getMonth() + 1) < 10 ? '0' + (newDate.getMonth() + 1) : newDate.getMonth() + 1\n    const day = newDate.getDate() < 10 ? '0' + newDate.getDate() : newDate.getDate()\n    const hours = newDate.getHours() < 10 ? '0' + newDate.getHours() : newDate.getHours()\n    const minuts = newDate.getMinutes() < 10 ? '0' + newDate.getMinutes() : newDate.getMinutes()\n    const seconds = newDate.getSeconds() < 10 ? '0' + newDate.getSeconds() : newDate.getSeconds()\n    let ret\n    if (accuracy === 'd') {\n      ret = year + '-' + month + '-' + day\n    } else if (accuracy === 'h') {\n      ret = year + '-' + month + '-' + day + ' ' + hours\n    } else if (accuracy === 'm') {\n      ret = year + '-' + month + '-' + day + ' ' + hours + ':' + minuts\n    } else {\n      ret = year + '-' + month + '-' + day + ' ' + hours + ':' + minuts + ':' + seconds\n    }\n    return ret\n  },\n\n  _initContainer: function () {\n    const className = 'leaflet-control-playback'\n    this._container = L.DomUtil.create('div', className)\n    L.DomEvent.disableClickPropagation(this._container)\n\n    this._optionsContainer = this._createContainer('optionsContainer', this._container)\n    this._infoContainer = this._createContainer('infoContainer', this._container)\n    this._sliderContainer = this._createContainer('sliderContainer', this._container)\n\n    this._pointCbx = this._createCheckbox('show trackPoint', 'show-trackpoint', this._optionsContainer, this._showTrackPoint)\n    this._lineCbx = this._createCheckbox('show trackLine', 'show-trackLine', this._optionsContainer, this._showTrackLine)\n\n    this._infoStartTime = this._createInfo('startTime: ', this.getTimeStrFromUnix(this.trackPlayBack.getStartTime()), 'info-start-time', this._infoContainer)\n    this._infoEndTime = this._createInfo('endTime: ', this.getTimeStrFromUnix(this.trackPlayBack.getEndTime()), 'info-end-time', this._infoContainer)\n    this._infoCurTime = this._createInfo('curTime: ', this.getTimeStrFromUnix(this.trackPlayBack.getCurTime()), 'info-cur-time', this._infoContainer)\n\n    this._slider = this._createSlider('time-slider', this._sliderContainer, this._scrollchange)\n\n    return this._container\n  },\n\n  _createContainer: function (className, container) {\n    return L.DomUtil.create('div', className, container)\n  },\n\n  _createCheckbox: function (labelName, className, container, fn) {\n    const divEle = L.DomUtil.create('div', className + ' trackplayback-checkbox', container)\n\n    const inputEle = L.DomUtil.create('input', 'trackplayback-input', divEle)\n    const inputId = `trackplayback-input-${L.Util.stamp(inputEle)}`\n    inputEle.setAttribute('type', 'checkbox')\n    inputEle.setAttribute('id', inputId)\n\n    const labelEle = L.DomUtil.create('label', 'trackplayback-label', divEle)\n    labelEle.setAttribute('for', inputId)\n    labelEle.innerHTML = labelName\n\n    L.DomEvent.on(inputEle, 'change', fn, this)\n\n    return divEle\n  },\n\n  _createInfo: function (title, info, className, container) {\n    const infoContainer = L.DomUtil.create('div', 'info-container', container)\n    const infoTitle = L.DomUtil.create('span', 'info-title', infoContainer)\n    infoTitle.innerHTML = title\n    const infoEle = L.DomUtil.create('span', className, infoContainer)\n    infoEle.innerHTML = info\n    return infoEle\n  },\n\n  _createSlider: function (className, container, fn) {\n    const sliderEle = L.DomUtil.create('input', className, container)\n    sliderEle.setAttribute('type', 'range')\n    sliderEle.setAttribute('min', this.trackPlayBack.getStartTime())\n    sliderEle.setAttribute('max', this.trackPlayBack.getEndTime())\n    sliderEle.setAttribute('value', this.trackPlayBack.getCurTime())\n\n    L.DomEvent.on(sliderEle, 'click mousedown dbclick', L.DomEvent.stopPropagation)\n      .on(sliderEle, 'click', L.DomEvent.preventDefault)\n      .on(sliderEle, 'change', fn, this)\n      .on(sliderEle, 'mousemove', fn, this)\n\n    return sliderEle\n  },\n\n  _showTrackPoint (e) {\n    if (e.target.checked) {\n      this.trackPlayBack.showTrackPoint()\n    } else {\n      this.trackPlayBack.hideTrackPoint()\n    }\n  },\n\n  _showTrackLine (e) {\n    if (e.target.checked) {\n      this.trackPlayBack.showTrackLine()\n    } else {\n      this.trackPlayBack.hideTrackLine()\n    }\n  },\n\n  _scrollchange: function (e) {\n    const val = Number(e.target.value)\n    this.trackPlayBack.setCursor(val)\n  },\n\n  _tickCallback: function (e) {\n    // Update time\n    const time = this.getTimeStrFromUnix(e.time)\n    this._infoCurTime.innerHTML = time\n    // Update timeline\n    this._slider.value = e.time\n    // Stop playback when it reaches the end\n    if (e.time >= this.trackPlayBack.getEndTime()) {\n      this.trackPlayBack.stop()\n    }\n  }\n})\n\nexport const trackplaybackcontrol = function (trackplayback, options) {\n  return new TrackPlayBackControl(trackplayback, options)\n}\n","import L from 'leaflet'\nimport {\n  TrackPlayBackControl,\n  trackplaybackcontrol\n} from './control.playback'\n\nL.TrackPlayBackControl = TrackPlayBackControl\nL.trackplaybackcontrol = trackplaybackcontrol\n"],"names":["root","factory","exports","module","require","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__421__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","TrackPlayBackControl","extend","options","position","showOptions","showInfo","showSlider","initialize","trackplayback","this","trackPlayBack","on","_tickCallback","onAdd","map","_initContainer","_container","onRemove","dispose","off","getTimeStrFromUnix","time","accuracy","parseInt","newDate","Date","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minuts","getMinutes","seconds","getSeconds","ret","create","disableClickPropagation","_optionsContainer","_createContainer","_infoContainer","_sliderContainer","_pointCbx","_createCheckbox","_showTrackPoint","_lineCbx","_showTrackLine","_infoStartTime","_createInfo","getStartTime","_infoEndTime","getEndTime","_infoCurTime","getCurTime","_slider","_createSlider","_scrollchange","className","container","labelName","fn","divEle","inputEle","inputId","stamp","setAttribute","labelEle","innerHTML","title","info","infoContainer","infoEle","sliderEle","stopPropagation","preventDefault","e","target","checked","showTrackPoint","hideTrackPoint","showTrackLine","hideTrackLine","val","Number","value","setCursor","stop"],"sourceRoot":""}