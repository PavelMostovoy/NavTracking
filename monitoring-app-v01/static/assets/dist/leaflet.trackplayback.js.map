{"version":3,"file":"leaflet.trackplayback.js","mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,iBAC7B,GAAqB,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,WAAYJ,OAChB,CACJ,IAAIM,EAAuB,iBAAZL,QAAuBD,EAAQG,QAAQ,YAAcH,EAAQD,EAAQ,GACpF,IAAI,IAAIQ,KAAKD,GAAuB,iBAAZL,QAAuBA,QAAUF,GAAMQ,GAAKD,EAAEC,EACvE,CACA,CATD,CASGC,KAAOC,G,kCCTVP,EAAOD,QAAUQ,C,GCCbC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaZ,QAGrB,IAAIC,EAASQ,EAAyBE,GAAY,CAGjDX,QAAS,CAAC,GAOX,OAHAc,EAAoBH,GAAUV,EAAQA,EAAOD,QAASU,GAG/CT,EAAOD,OACf,CCrBAU,EAAoBK,EAAKd,IACxB,IAAIe,EAASf,GAAUA,EAAOgB,WAC7B,IAAOhB,EAAiB,QACxB,IAAM,EAEP,OADAS,EAAoBQ,EAAEF,EAAQ,CAAEX,EAAGW,IAC5BA,GCLRN,EAAoBQ,EAAI,CAAClB,EAASmB,KACjC,IAAI,IAAIC,KAAOD,EACXT,EAAoBW,EAAEF,EAAYC,KAASV,EAAoBW,EAAErB,EAASoB,IAC5EE,OAAOC,eAAevB,EAASoB,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3EV,EAAoBW,EAAI,CAACK,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,G,sBCA3E,SAASI,EAASC,GACvB,OAAOC,MAAMF,QAAUE,MAAMF,QAAQC,GAA+C,mBAAxCV,OAAOM,UAAUM,SAASJ,KAAKE,EAC7E,CCOO,MAAMG,EAAQ,UAAQC,OAAO,CAElCC,WAAY,SAAUC,EAAY,GAAIC,GACpC,eAAaC,KAAMD,GAEnBD,EAAUG,QAAQC,IAEhBA,EAAKC,UAAW,IAElBH,KAAKI,aAAeN,EACpBE,KAAKK,UAAY,CAAC,EAClBL,KAAKM,SACP,EAEAC,cAAe,SAAUC,GACvB,GAAIjB,EAAQiB,GACV,IAAK,IAAI1C,EAAI,EAAG2C,EAAMD,EAAWE,OAAQ5C,EAAI2C,EAAK3C,IAChDkC,KAAKO,cAAcC,EAAW1C,IAGlCkC,KAAKW,eAAeH,EACtB,EAEAI,SAAU,WACR,MAAMC,EAAQ,GACd,IAAK,IAAI/C,EAAI,EAAG2C,EAAMT,KAAKI,aAAaM,OAAQ5C,EAAI2C,EAAK3C,IACvD+C,EAAMC,KAAKd,KAAKI,aAAatC,GAAGiD,MAElC,OAAOF,CACT,EAEAG,mBAAoB,WAClB,OAAOhB,KAAKI,aAAa,EAC3B,EAEAa,iBAAkB,WAChB,OAAOjB,KAAKI,aAAaJ,KAAKI,aAAaM,OAAS,EACtD,EAEAQ,oBAAqB,SAAUH,GAC7B,OAAOf,KAAKI,aAAaJ,KAAKK,UAAUU,GAC1C,EAEAI,8BAA+B,SAAUJ,GAEvC,IAAIK,EAAWpB,KAAKkB,oBAAoBH,GACpCM,EAAUrB,KAAKgB,qBACfM,EAAQtB,KAAKiB,mBACjB,MAAMJ,EAAQb,KAAKY,WACnB,GAAIG,EAAOM,EAAQN,MAAQA,EAAOO,EAAMP,KAAM,OAC9C,IAEIxC,EAFAgD,EAAO,EACPC,EAAQX,EAAMH,OAAS,EAG3B,GAAIa,IAASC,EACX,OAAOJ,EAGT,KAAOI,EAAQD,IAAS,GACtBhD,EAAIkD,UAAUF,EAAOC,GAAS,GAC1BT,EAAOF,EAAMtC,GAAIgD,EAAOhD,EACvBiD,EAAQjD,EAGf,MAAMmD,EAAKb,EAAMU,GACXI,EAAKd,EAAMW,GACXI,EAAIb,EACJc,EAAK7B,KAAKkB,oBAAoBQ,GAC9BI,EAAK9B,KAAKkB,oBAAoBS,GACpCN,EAAU,UAAQQ,EAAGE,IAAKF,EAAGG,KAC7BV,EAAQ,UAAQQ,EAAGC,IAAKD,EAAGE,KAC3B,MAAMC,EAAIZ,EAAQa,WAAWZ,GAE7B,GAAIW,GAAK,EAEP,OADAb,EAAWU,EACJV,EAIT,MAAMe,EAAIF,GAAKN,EAAKD,GACdU,GAAQd,EAAMe,EAAIhB,EAAQgB,GAAKJ,EAC/BK,GAAQhB,EAAMiB,EAAIlB,EAAQkB,GAAKN,EAC/BO,EAAOL,GAAKP,EAAIF,GAChBa,EAAIlB,EAAQkB,EAAIC,EAAOF,EACvBD,EAAIhB,EAAQgB,EAAIG,EAAOJ,EAEvBK,EAAMnB,EAAMiB,GAAKlB,EAAQkB,EAAwC,KAAzB,GAAVG,KAAKC,GAAWD,KAAKE,KAAKR,IAAeM,KAAKC,GAAyC,KAAzB,IAAVD,KAAKC,GAAWD,KAAKE,KAAKR,IAAeM,KAAKC,GAiBtI,OAfIvB,OACmB/C,IAAjB+C,EAASqB,MACXrB,EAASqB,IAAMA,GAGjBrB,EAAW,CACTW,IAAKQ,EACLP,IAAKK,EACLI,IAAKnB,EAAMmB,KAAOA,EAClBtC,UAAU,EACVY,OACA8B,MAAOhB,EAAGgB,MACVC,KAAMjB,EAAGiB,MAGN1B,CACT,EAGA2B,yBAA0B,SAAUhC,GAClC,MAAMiC,EAAU,GAChB,IAAK,IAAIlF,EAAI,EAAG2C,EAAMT,KAAKI,aAAaM,OAAQ5C,EAAI2C,EAAK3C,IACnDkC,KAAKI,aAAatC,GAAGiD,KAAOA,GAC9BiC,EAAQlC,KAAKd,KAAKI,aAAatC,IAInC,MAAMwD,EAAQtB,KAAKmB,8BAA8BJ,GAIjD,OAHIO,GACF0B,EAAQlC,KAAKQ,GAER0B,CACT,EAEArC,eAAgB,SAAUH,GACxBA,EAAWL,UAAW,EACtBH,KAAKI,aAAaU,KAAKN,GACvBR,KAAKM,SACP,EAEAA,QAAS,WACPN,KAAKiD,yBACLjD,KAAKkD,iBACP,EAGAD,uBAAwB,WACtB,MAAMxC,EAAMT,KAAKI,aAAaM,OAC9B,IAAK,IAAI5C,EAAI,EAAGA,EAAI2C,EAAK3C,IACvB,IAAK,IAAIqF,EAAI,EAAGA,EAAI1C,EAAM,EAAI3C,EAAGqF,IAC/B,GAAInD,KAAKI,aAAa+C,GAAGpC,KAAOf,KAAKI,aAAa+C,EAAI,GAAGpC,KAAM,CAC7D,MAAMqC,EAAMpD,KAAKI,aAAa+C,EAAI,GAClCnD,KAAKI,aAAa+C,EAAI,GAAKnD,KAAKI,aAAa+C,GAC7CnD,KAAKI,aAAa+C,GAAKC,CACzB,CAGN,EAGAF,gBAAiB,WACflD,KAAKK,UAAY,CAAC,EAClB,IAAK,IAAIvC,EAAI,EAAG2C,EAAMT,KAAKI,aAAaM,OAAQ5C,EAAI2C,EAAK3C,IACvDkC,KAAKK,UAAUL,KAAKI,aAAatC,GAAGiD,MAAQjD,CAEhD,ICrJWuF,EAAkB,UAAQzD,OAAO,CAE5CC,WAAY,SAAUyD,EAAS,GAAIC,EAAMxD,GACvC,eAAaC,KAAMD,GAEnBC,KAAKwD,QAAU,GACfxD,KAAKyD,SAASH,GAEdtD,KAAK0D,MAAQH,EAEbvD,KAAK2D,aACP,EAEAC,WAAY,WACV,OAAO5D,KAAK6D,QACd,EAEAC,WAAY,WACV,OAAO9D,KAAK+D,QACd,EAEAN,SAAU,SAAUO,GAClB,GAAIzE,EAAQyE,GACV,IAAK,IAAIlG,EAAI,EAAG2C,EAAMuD,EAAMtD,OAAQ5C,EAAI2C,EAAK3C,IAC3CkC,KAAKyD,SAASO,EAAMlG,QAEjB,MAAIkG,aAAiBrE,GAI1B,MAAM,IAAIsE,MAAM,0EAHhBjE,KAAKwD,QAAQ1C,KAAKkD,GAClBhE,KAAK2D,aAGP,CACF,EAEAO,iBAAkB,SAAUnD,GAC1Bf,KAAK0D,MAAMS,QACX,IAAK,IAAIrG,EAAI,EAAG2C,EAAMT,KAAKwD,QAAQ9C,OAAQ5C,EAAI2C,EAAK3C,IAAK,CACvD,MACMsG,EADQpE,KAAKwD,QAAQ1F,GACTiF,yBAAyBhC,GACvCqD,GAAOA,EAAI1D,QAAQV,KAAK0D,MAAMW,UAAUD,EAC9C,CACF,EAEAT,YAAa,WACX3D,KAAK6D,SAAW7D,KAAKwD,QAAQ,GAAGxC,qBAAqBD,KACrDf,KAAK+D,SAAW/D,KAAKwD,QAAQ,GAAGvC,mBAAmBF,KACnD,IAAK,IAAIjD,EAAI,EAAG2C,EAAMT,KAAKwD,QAAQ9C,OAAQ5C,EAAI2C,EAAK3C,IAAK,CACvD,MAAMwG,EAAQtE,KAAKwD,QAAQ1F,GAAGkD,qBAAqBD,KAC7CwD,EAAQvE,KAAKwD,QAAQ1F,GAAGmD,mBAAmBF,KAC7CuD,EAAQtE,KAAK6D,WACf7D,KAAK6D,SAAWS,GAEdC,EAAQvE,KAAK+D,WACf/D,KAAK+D,SAAWQ,EAEpB,CACF,ICjEWC,EAAQ,UAAQ5E,OAAO,CAElC6E,SAAU,YAAUrF,UAEpBW,QAAS,CAGP2E,MAAO,GAEPC,SAAU,IAGZ9E,WAAY,SAAU+E,EAAiB7E,GACrC,eAAaC,KAAMD,GAEnBC,KAAK6E,iBAAmBD,EACxB5E,KAAK8E,SAAW9E,KAAK6E,iBAAiBf,aACtC9D,KAAK+E,SAAW/E,KAAK6E,iBAAiBjB,aACtC5D,KAAKgF,OAAShF,KAAKD,QAAQ2E,MAC3B1E,KAAKiF,UAAYjF,KAAKD,QAAQ4E,SAC9B3E,KAAKkF,YAAc,KACnBlF,KAAKmF,mBAAqB,CAC5B,EAEAC,MAAO,WACDpF,KAAKkF,cACTlF,KAAKkF,YAAc,SAAOG,iBAAiBrF,KAAKsF,MAAOtF,MACzD,EAEAuF,KAAM,WACCvF,KAAKkF,cACV,SAAOM,gBAAgBxF,KAAKkF,aAC5BlF,KAAKkF,YAAc,KACnBlF,KAAKmF,mBAAqB,EAC5B,EAEAM,UAAW,WACTzF,KAAKuF,OACLvF,KAAK+E,SAAW/E,KAAK6E,iBAAiBjB,aACtC5D,KAAKoF,OACP,EAEAM,UAAW,WACT1F,KAAKgF,OAAShF,KAAKgF,QAAU,EAAIhF,KAAKgF,OAAShF,KAAKgF,OAAS,EACzDhF,KAAKkF,cACPlF,KAAKuF,OACLvF,KAAKoF,QAET,EAEAO,WAAY,WACV3F,KAAKgF,OAAShF,KAAKgF,QAAUhF,KAAKiF,UAAYjF,KAAKgF,OAAShF,KAAKgF,OAAS,EACtEhF,KAAKkF,cACPlF,KAAKuF,OACLvF,KAAKoF,QAET,EAEAQ,SAAU,WACR,OAAO5F,KAAKgF,MACd,EAEAa,WAAY,WACV,OAAO7F,KAAK+E,QACd,EAEAe,aAAc,WACZ,OAAO9F,KAAK6E,iBAAiBjB,YAC/B,EAEAmC,WAAY,WACV,OAAO/F,KAAK6E,iBAAiBf,YAC/B,EAEAkC,UAAW,WACT,QAAShG,KAAKkF,WAChB,EAEAe,UAAW,SAAUlF,GACnBf,KAAK+E,SAAWhE,EAChBf,KAAK6E,iBAAiBX,iBAAiBlE,KAAK+E,UAC5C/E,KAAKkG,KAAK,OAAQ,CAChBnF,KAAMf,KAAK+E,UAEf,EAEAoB,SAAU,SAAUzB,GAClB1E,KAAKgF,OAASN,EACV1E,KAAKkF,cACPlF,KAAKuF,OACLvF,KAAKoF,QAET,EAGAgB,iBAAkB,SAAUC,GAC1B,IAAItF,EASJ,OAPEA,EAD8B,IAA5Bf,KAAKmF,mBACA,EAEAkB,EAAMrG,KAAKmF,mBAEpBnF,KAAKmF,mBAAqBkB,EAE1BtF,GAAc,IACPA,CACT,EAEAuE,MAAO,WACL,MAAMe,GAAO,IAAIC,KAEjB,IAAIC,GAAU,EACd,MAAMC,EAFUxG,KAAKoG,iBAAiBC,GAEX3D,KAAK+D,IAAI,EAAGzG,KAAKgF,OAAS,GACrDhF,KAAK+E,UAAYyB,EACbxG,KAAK+E,UAAY/E,KAAK8E,WACxB9E,KAAK+E,SAAW/E,KAAK8E,SACrByB,GAAU,GAEZvG,KAAK6E,iBAAiBX,iBAAiBlE,KAAK+E,UAC5C/E,KAAKkG,KAAK,OAAQ,CAChBnF,KAAMf,KAAK+E,WAERwB,IAASvG,KAAKkF,YAAc,SAAOG,iBAAiBrF,KAAKsF,MAAOtF,MACvE,IC1HW0G,EAAa,aAAW9G,OAAO,CAE1CC,WAAY,SAAUE,GACpB,aAAWX,UAAUS,WAAWP,KAAKU,KAAMD,GAC3CC,KAAKD,QAAQ4G,QAAU,EACzB,EAEAC,MAAO,SAAUC,GACf7G,KAAK8G,WAAa,YAAUC,OAAO,SAAU,yBAEhCF,EAAIG,QAAQhH,KAAKD,QAAQkH,MACjCC,YAAYlH,KAAK8G,YAEtB9G,KAAKmH,KAAOnH,KAAK8G,WAAWM,WAAW,MAEvCpH,KAAKM,SACP,EAEA+G,SAAU,SAAUR,GAClB,YAAUS,OAAOtH,KAAK8G,WACxB,EAEAS,aAAc,WACZ,OAAOvH,KAAK8G,UACd,EAEAU,UAAW,WACT,OAAOxH,KAAKyH,OACd,EAEAnH,QAAS,WACP,GAAIN,KAAK0H,KAAKC,gBAAkB3H,KAAKyH,QACnC,OAGF,aAAWrI,UAAUkB,QAAQhB,KAAKU,MAElC,MAAM4H,EAAI5H,KAAKyH,QAETI,EAAY7H,KAAK8G,WAEjBgB,EAAOF,EAAEG,UAETC,EAAI,YAAUC,OAAS,EAAI,EAEjC,YAAUC,YAAYL,EAAWD,EAAEO,KAGnCN,EAAUO,MAAQJ,EAAIF,EAAKvF,EAC3BsF,EAAUQ,OAASL,EAAIF,EAAKzF,EAC5BwF,EAAUS,MAAMF,MAAQN,EAAKvF,EAAI,KACjCsF,EAAUS,MAAMD,OAASP,EAAKzF,EAAI,KAE9B,YAAU4F,QACZjI,KAAKmH,KAAKoB,MAAM,EAAG,GAIrBvI,KAAKmH,KAAKqB,WAAWZ,EAAEO,IAAI5F,GAAIqF,EAAEO,IAAI9F,GAGrCrC,KAAKkG,KAAK,SACZ,IC3DWuC,EAAO,UAAQ7I,OAAO,CAEjC8I,kBAAmB,CACjBC,QAAQ,EACRC,WAAW,EACXC,QAAQ,EACRhG,MAAO,UACPiG,MAAM,EACNC,UAAW,UACXC,QAAS,GACTC,OAAQ,GAEVC,iBAAkB,CAChBP,QAAQ,EACRE,QAAQ,EACRhG,MAAO,UACPsG,OAAQ,EACRL,MAAM,EACNC,UAAW,OACXC,QAAS,IAEXI,cAAe,CACbC,QAAQ,EACRC,OAAQ,+BACRC,UAAU,EACVnB,MAAO,EACPC,OAAQ,GACRxF,MAAO,OACPkG,UAAW,WAEbS,eAAgB,CACdC,OAAQ,CAAC,EAAG,GACZC,UAAW,MACXC,WAAW,GAGb9J,WAAY,SAAUgH,EAAK9G,GAyBzB,GAxBA,WAASC,KAAK0I,kBAAmB3I,EAAQ2I,mBACzC,WAAS1I,KAAKkJ,iBAAkBnJ,EAAQmJ,kBACxC,WAASlJ,KAAKoJ,cAAerJ,EAAQqJ,eACrC,WAASpJ,KAAKwJ,eAAgBzJ,EAAQyJ,gBAEtCxJ,KAAK4J,gBAAkB5J,KAAK0I,kBAAkBC,OAC9C3I,KAAK6J,eAAiB7J,KAAKkJ,iBAAiBP,OAE5C3I,KAAK0H,KAAOb,EACZ7G,KAAK0H,KAAKoC,GAAG,YAAa9J,KAAK+J,gBAAiB/J,MAEhDA,KAAKgK,aAAc,IAAItD,GAAauD,MAAMpD,GAC1C7G,KAAKgK,YAAYF,GAAG,SAAU9J,KAAKkK,kBAAmBlK,MAEtDA,KAAKmK,QAAUnK,KAAKgK,YAAYzC,eAChCvH,KAAKmH,KAAOnH,KAAKmK,QAAQ/C,WAAW,MAEpCpH,KAAKoK,cAAgB,GAEhBpK,KAAK0I,kBAAkBE,YAC1B5I,KAAKqK,wBAA0B,iBAAe,IAAIJ,MAAMpD,IAItD7G,KAAKoJ,cAAcC,OAAQ,CAC7B,MAAMiB,EAAM,IAAIC,MAChBD,EAAIE,OAAS,KACXxK,KAAKyK,WAAaH,GAEpBA,EAAII,QAAU,KACZ,MAAM,IAAIzG,MAAM,oBAElBqG,EAAIK,IAAM3K,KAAKoJ,cAAcE,MAC/B,CACF,EAEAsB,OAAQ,WACN5K,KAAKkK,mBACP,EAEA7F,UAAW,SAAUwG,GACnB7K,KAAKoK,cAActJ,KAAK+J,GACxB7K,KAAK8K,WAAWD,EAClB,EAEAE,eAAgB,WACd/K,KAAK4J,iBAAkB,EACvB5J,KAAK4K,QACP,EAEAI,eAAgB,WACdhL,KAAK4J,iBAAkB,EACvB5J,KAAK4K,QACP,EAEAK,cAAe,WACbjL,KAAK6J,gBAAiB,EACtB7J,KAAK4K,QACP,EAEAM,cAAe,WACblL,KAAK6J,gBAAiB,EACtB7J,KAAK4K,QACP,EAEAtD,OAAQ,WACNtH,KAAKoK,cAAgB,GACrBpK,KAAKgK,YAAYmB,IAAI,SAAUnL,KAAKkK,kBAAmBlK,MACvDA,KAAK0H,KAAKyD,IAAI,YAAanL,KAAK+J,gBAAiB/J,MAC7CA,KAAK0H,KAAK0D,SAASpL,KAAKgK,cAC1BhK,KAAK0H,KAAK2D,YAAYrL,KAAKgK,aAEzBhK,KAAK0H,KAAK0D,SAASpL,KAAKqK,0BAC1BrK,KAAK0H,KAAK2D,YAAYrL,KAAKqK,wBAE/B,EAEAlG,MAAO,WACLnE,KAAKsL,cACLtL,KAAKoK,cAAgB,EACvB,EAEAF,kBAAmB,WACblK,KAAKoK,cAAc1J,SACrBV,KAAKsL,cACLtL,KAAKoK,cAAcnK,QAAQ,SAAUsL,GACnCvL,KAAK8K,WAAWS,EAClB,EAAEC,KAAKxL,OAEX,EAEA+J,gBAAiB,SAAU0B,GACzB,IAAKzL,KAAK4J,gBACR,OAEF,MAAM8B,EAAQD,EAAEE,WAChB,GAAI3L,KAAKoK,cAAc1J,OACrB,IAAK,IAAI5C,EAAI,EAAG8N,EAAO5L,KAAKoK,cAAc1J,OAAQ5C,EAAI8N,EAAM9N,IAC1D,IAAK,IAAIqF,EAAI,EAAG1C,EAAMT,KAAKoK,cAActM,GAAG4C,OAAQyC,EAAI1C,EAAK0C,IAAK,CAChE,MAAM0I,EAAS7L,KAAK8L,eAAe9L,KAAKoK,cAActM,GAAGqF,IACzD,GAAIuI,EAAMxJ,WAAW2J,IAAW7L,KAAK0I,kBAAkBO,OAErD,YADAjJ,KAAK+L,aAAa/L,KAAKoK,cAActM,GAAGqF,GAG5C,CAGAnD,KAAK0H,KAAK0D,SAASpL,KAAKgM,WAC1BhM,KAAK0H,KAAK2D,YAAYrL,KAAKgM,UAE7BhM,KAAKmK,QAAQ7B,MAAM2D,OAAS,SAC9B,EAEAF,aAAc,SAAUG,GAClBlM,KAAK0H,KAAK0D,SAASpL,KAAKgM,WAC1BhM,KAAK0H,KAAK2D,YAAYrL,KAAKgM,UAE7BhM,KAAKmK,QAAQ7B,MAAM2D,OAAS,UAC5B,MAAME,EAAS,WAASD,EAAWlK,IAAKkK,EAAWnK,KAC7CqK,EAAUpM,KAAKgM,SAAW,YAAUhM,KAAKwJ,gBAC/C4C,EAAQC,UAAUF,GAClBC,EAAQnC,MAAMjK,KAAK0H,MACnB0E,EAAQE,WAAWtM,KAAKuM,gBAAgBL,GAC1C,EAEApB,WAAY,SAAUD,GAEhB7K,KAAK6J,gBACP7J,KAAKwM,eAAe3B,GAGtB,MAAM4B,EAAc5B,EAAYA,EAAYnK,OAAS,GACjDV,KAAKoJ,cAAcC,QAAUrJ,KAAKyK,WACpCzK,KAAK0M,eAAeD,GAEpBzM,KAAK2M,gBAAgBF,GAGnBzM,KAAKoJ,cAAcG,UACrBvJ,KAAK4M,SAAS,YAAYnL,SAASgL,EAAYhK,QAASgK,GAGtDzM,KAAK4J,kBACH5J,KAAK0I,kBAAkBE,UACzB5I,KAAK6M,uBAAuBhC,GAE5B7K,KAAK8M,oBAAoBjC,GAG/B,EAEA2B,eAAgB,SAAU3B,GACxB,MAAM9K,EAAUC,KAAKkJ,iBACf6D,EAAM/M,KAAK8L,eAAejB,EAAY,IAC5C7K,KAAKmH,KAAK6F,OACVhN,KAAKmH,KAAK8F,YAEVjN,KAAKmH,KAAK+F,OAAOH,EAAIxK,EAAGwK,EAAI1K,GAC5B,IAAK,IAAIvE,EAAI,EAAG2C,EAAMoK,EAAYnK,OAAQ5C,EAAI2C,EAAK3C,IAAK,CACtD,MAAMqP,EAAMnN,KAAK8L,eAAejB,EAAY/M,IAC5CkC,KAAKmH,KAAKiG,OAAOD,EAAI5K,EAAG4K,EAAI9K,EAC9B,CACArC,KAAKmH,KAAKkG,YAActN,EAAQiJ,QAC5BjJ,EAAQ8I,SAEV7I,KAAKmH,KAAKmG,iBAAuCjP,IAAzBwM,EAAY,GAAGhI,MAAsBgI,EAAY,GAAGhI,MAAQ,UACpF7C,KAAKmH,KAAKoG,UAAYxN,EAAQoJ,OAC9BnJ,KAAKmH,KAAK0B,UAER9I,EAAQ+I,OACV9I,KAAKmH,KAAKqG,UAAYzN,EAAQgJ,UAC9B/I,KAAKmH,KAAK2B,QAEZ9I,KAAKmH,KAAKsG,SACZ,EAEAZ,uBAAwB,SAAUhC,GAChC,MAAM9K,EAAUC,KAAK0I,kBACrB1I,KAAKmH,KAAK6F,OAGV,MAAMU,OAAsCrP,IAAzBwM,EAAY,GAAGhI,MAAsBgI,EAAY,GAAGhI,MAAQ,UACzE8K,OAA0CtP,IAAzBwM,EAAY,GAAGhI,MAAsBgI,EAAY,GAAGhI,MAAQ,UAEnF,IAAK,IAAI/E,EAAI,EAAG2C,EAAMoK,EAAYnK,OAAQ5C,EAAI2C,EAAK3C,IACjD,GAAI+M,EAAY/M,GAAGqC,SAAU,CAC3B,MAAMyN,EAAS,WAAS/C,EAAY/M,GAAGkE,IAAK6I,EAAY/M,GAAGiE,KACrDkH,EAASlJ,EAAQkJ,OACjByC,EAAQ1L,KAAK0H,KAAKmG,mBAAmBD,GAC3C5N,KAAKmH,KAAK8F,YACVjN,KAAKmH,KAAK2G,IAAIpC,EAAMnJ,EAAGmJ,EAAMrJ,EAAG4G,EAAQ,EAAa,EAAVvG,KAAKC,IAAQ,GACxD3C,KAAKmH,KAAKkG,YAActN,EAAQiJ,QAC5BjJ,EAAQ8I,SACV7I,KAAKmH,KAAKmG,YAAcI,EACxB1N,KAAKmH,KAAK0B,UAER9I,EAAQ+I,OACV9I,KAAKmH,KAAKqG,UAAYG,EACtB3N,KAAKmH,KAAK2B,OAEd,CAEF9I,KAAKmH,KAAKsG,SACZ,EAEAX,oBAAqB,SAAUjC,GAC7B,IAAK,IAAI/M,EAAI,EAAG2C,EAAMoK,EAAYnK,OAAQ5C,EAAI2C,EAAK3C,IACjD,GAAI+M,EAAY/M,GAAGqC,SAAU,CAC3B,MAAMyN,EAAS,WAAS/C,EAAY/M,GAAGkE,IAAK6I,EAAY/M,GAAGiE,KACrDgM,EAAe,iBAAeH,EAAQ5N,KAAK0I,mBACjDqF,EAAaC,YAAYhO,KAAKuM,gBAAgB1B,EAAY/M,IAAKkC,KAAKwJ,gBACpExJ,KAAKqK,wBAAwB4D,SAASF,EACxC,CAEJ,EAEAnB,SAAU,SAAUsB,EAAMhC,GACxB,MAAMR,EAAQ1L,KAAK8L,eAAeI,GAClClM,KAAKmH,KAAK6F,OACVhN,KAAKmH,KAAKgH,KAAO,eACjBnO,KAAKmH,KAAKqG,UAAY,OACtBxN,KAAKmH,KAAKiH,UAAY,SACtBpO,KAAKmH,KAAKkH,aAAe,SACzBrO,KAAKmH,KAAKmH,SAASJ,EAAMxC,EAAMnJ,EAAGmJ,EAAMrJ,EAAI,GAAI,KAChDrC,KAAKmH,KAAKsG,SACZ,EAEAd,gBAAiB,SAAUT,GACzB,MAAMR,EAAQ1L,KAAK8L,eAAeI,GAC5BqC,EAASrC,EAAWzJ,KAAO,EAC3B+L,EAAIxO,KAAKoJ,cAAchB,MACvBqG,EAAIzO,KAAKoJ,cAAcf,OACvBqG,EAAKD,EAAI,EAITE,OAAqCtQ,IAArB6N,EAAWrJ,MAAsBqJ,EAAWrJ,MAAQ,UAE1E7C,KAAKmH,KAAK6F,OACVhN,KAAKmH,KAAKqG,UAAYmB,EACtB3O,KAAKmH,KAAKmG,YALQ,UAMlBtN,KAAKmH,KAAKqB,UAAUkD,EAAMnJ,EAAGmJ,EAAMrJ,GACnCrC,KAAKmH,KAAKoH,OAAQ7L,KAAKC,GAAK,IAAO4L,GACnCvO,KAAKmH,KAAK8F,YACVjN,KAAKmH,KAAK+F,OAAO,EAAG,EAAIuB,EAAI,GAC5BzO,KAAKmH,KAAKiG,OAAO,EAAIoB,EAAI,EAAG,EAAIC,EAAI,EAAIC,GACxC1O,KAAKmH,KAAKiG,OAAO,EAAIoB,EAAI,EAAGC,EAAI,GAChCzO,KAAKmH,KAAKiG,OAAOoB,EAAI,EAAGC,EAAI,GAC5BzO,KAAKmH,KAAKiG,OAAOoB,EAAI,EAAG,EAAIC,EAAI,EAAIC,GACpC1O,KAAKmH,KAAKyH,YACV5O,KAAKmH,KAAK2B,OACV9I,KAAKmH,KAAK0B,SACV7I,KAAKmH,KAAKsG,SACZ,EAEAf,eAAgB,SAAUR,GACxB,MAAMR,EAAQ1L,KAAK8L,eAAeI,GAC5BzJ,EAAMyJ,EAAWzJ,KAAO,EACxB2F,EAAQpI,KAAKoJ,cAAchB,MAC3BC,EAASrI,KAAKoJ,cAAcf,OAC5BoB,EACDrB,EAAQ,EADPqB,EAEDpB,EAAS,EAEdrI,KAAKmH,KAAK6F,OACVhN,KAAKmH,KAAKqB,UAAUkD,EAAMnJ,EAAGmJ,EAAMrJ,GACnCrC,KAAKmH,KAAKoH,OAAQ7L,KAAKC,GAAK,IAAOF,GACnCzC,KAAKmH,KAAK0H,UAAU7O,KAAKyK,WAAY,EAAIhB,EAAU,EAAIA,EAAUrB,EAAOC,GACxErI,KAAKmH,KAAKsG,SACZ,EAEAlB,gBAAiB,SAAUuC,GACzB,IAAIC,EAAU,GAEd,GADAA,EAAQjO,KAAK,WACTgO,EAAUhM,MAAQgM,EAAUhM,KAAKpC,OACnC,IAAK,IAAI5C,EAAI,EAAG2C,EAAMqO,EAAUhM,KAAKpC,OAAQ5C,EAAI2C,EAAK3C,IACpDiR,EAAQjO,KAAK,QACbiO,EAAQjO,KAAK,OAASgO,EAAUhM,KAAKhF,GAAGc,IAAM,SAC9CmQ,EAAQjO,KAAK,OAASgO,EAAUhM,KAAKhF,GAAGkR,MAAQ,SAChDD,EAAQjO,KAAK,SAKjB,OAFAiO,EAAQjO,KAAK,YACbiO,EAAUA,EAAQE,KAAK,IAChBF,CACT,EAEAzD,YAAa,WACX,MAAM4D,EAASlP,KAAKgK,YAAYxC,YAChC,GAAI0H,EAAQ,CACV,MAAMpH,EAAOoH,EAAOnH,UACpB/H,KAAKmH,KAAKgI,UAAUD,EAAO/G,IAAI5F,EAAG2M,EAAO/G,IAAI9F,EAAGyF,EAAKvF,EAAGuF,EAAKzF,EAC/D,MACErC,KAAKmH,KAAKgI,UAAU,EAAG,EAAGnP,KAAKmK,QAAQ/B,MAAOpI,KAAKmK,QAAQ9B,QAEzDrI,KAAK0H,KAAK0D,SAASpL,KAAKqK,0BAC1BrK,KAAKqK,wBAAwB+E,aAEjC,EAEA,cAAAtD,CAAgBI,GACd,OAAOlM,KAAK0H,KAAKmG,mBAAmB,WAAS3B,EAAWlK,IAAKkK,EAAWnK,KAC1E,ICpUWsN,EAAgB,UAAQzP,OAAO,CAE1C6E,SAAU,YAAUrF,UAEpBS,WAAY,SAAUyP,EAAMzI,EAAK9G,EAAU,CAAC,GAC1C,MAAMwP,EAAc,CAClB7G,kBAAmB3I,EAAQ2I,kBAC3BQ,iBAAkBnJ,EAAQmJ,iBAC1BE,cAAerJ,EAAQqJ,cACvBI,eAAgBzJ,EAAQyJ,gBAE1BxJ,KAAKsD,OAAStD,KAAKwP,YAAYF,GAC/BtP,KAAKuD,KAAO,IAAIkF,EAAK5B,EAAK0I,GAC1BvP,KAAK4E,gBAAkB,IAAIvB,EAAgBrD,KAAKsD,OAAQtD,KAAKuD,MAC7DvD,KAAKyP,MAAQ,IAAIjL,EAAMxE,KAAK4E,gBAAiB7E,EAAQ2P,cAGrD1P,KAAK4E,gBAAgBV,iBAAiBlE,KAAKyP,MAAM5J,cAEjD7F,KAAKyP,MAAM3F,GAAG,OAAQ9J,KAAKsF,MAAOtF,KACpC,EACAoF,MAAO,WAEL,OADApF,KAAKyP,MAAMrK,QACJpF,IACT,EACAuF,KAAM,WAEJ,OADAvF,KAAKyP,MAAMlK,OACJvF,IACT,EACAyF,UAAW,WAET,OADAzF,KAAKyP,MAAMhK,YACJzF,IACT,EACA0F,UAAW,WAET,OADA1F,KAAKyP,MAAM/J,YACJ1F,IACT,EACA2F,WAAY,WAEV,OADA3F,KAAKyP,MAAM9J,aACJ3F,IACT,EACA4F,SAAU,WACR,OAAO5F,KAAKyP,MAAM7J,UACpB,EACAC,WAAY,WACV,OAAO7F,KAAKyP,MAAM5J,YACpB,EACAC,aAAc,WACZ,OAAO9F,KAAKyP,MAAM3J,cACpB,EACAC,WAAY,WACV,OAAO/F,KAAKyP,MAAM1J,YACpB,EACAC,UAAW,WACT,OAAOhG,KAAKyP,MAAMzJ,WACpB,EACAC,UAAW,SAAUlF,GAEnB,OADAf,KAAKyP,MAAMxJ,UAAUlF,GACdf,IACT,EACAmG,SAAU,SAAUzB,GAElB,OADA1E,KAAKyP,MAAMtJ,SAASzB,GACb1E,IACT,EACA+K,eAAgB,WAEd,OADA/K,KAAKuD,KAAKwH,iBACH/K,IACT,EACAgL,eAAgB,WAEd,OADAhL,KAAKuD,KAAKyH,iBACHhL,IACT,EACAiL,cAAe,WAEb,OADAjL,KAAKuD,KAAK0H,gBACHjL,IACT,EACAkL,cAAe,WAEb,OADAlL,KAAKuD,KAAK2H,gBACHlL,IACT,EACA2P,QAAS,WACP3P,KAAKyP,MAAMtE,IAAI,OAAQnL,KAAKsF,OAC5BtF,KAAKuD,KAAK+D,SACVtH,KAAKsD,OAAS,KACdtD,KAAKuD,KAAO,KACZvD,KAAK4E,gBAAkB,KACvB5E,KAAKyP,MAAQ,IACf,EACAnK,MAAO,SAAUmG,GACfzL,KAAKkG,KAAK,OAAQuF,EACpB,EACA+D,YAAa,SAAUF,GACrB,MAAMhM,EAAS,GACf,GAAI,EAAagM,GACf,GAAI,EAAaA,EAAK,IAEpB,IAAK,IAAIxR,EAAI,EAAG2C,EAAM6O,EAAK5O,OAAQ5C,EAAI2C,EAAK3C,IAC1CwF,EAAOxC,KAAK,IAAInB,EAAM2P,EAAKxR,UAI7BwF,EAAOxC,KAAK,IAAInB,EAAM2P,IAG1B,OAAOhM,CACT,I,OCzHF,kBAAkB+L,EAClB,kBD2H6B,SAAUC,EAAMzI,EAAK9G,GAChD,OAAO,IAAIsP,EAAcC,EAAMzI,EAAK9G,EACtC,E","sources":["webpack://leaflet-plugin-trackplayback/webpack/universalModuleDefinition","webpack://leaflet-plugin-trackplayback/external umd {\"root\":\"L\",\"commonjs\":\"leaflet\",\"commonjs2\":\"leaflet\",\"amd\":\"leaflet\"}","webpack://leaflet-plugin-trackplayback/webpack/bootstrap","webpack://leaflet-plugin-trackplayback/webpack/runtime/compat get default export","webpack://leaflet-plugin-trackplayback/webpack/runtime/define property getters","webpack://leaflet-plugin-trackplayback/webpack/runtime/hasOwnProperty shorthand","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/util.js","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/track.js","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/trackcontroller.js","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/clock.js","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/tracklayer.js","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/draw.js","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/trackplayback.js","webpack://leaflet-plugin-trackplayback/./src/leaflet.trackplayback/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"leaflet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"leaflet\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"leaflet\")) : factory(root[\"L\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, (__WEBPACK_EXTERNAL_MODULE__421__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__421__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export function isArray (arr) {\n  return Array.isArray ? Array.isArray(arr) : Object.prototype.toString.call(arr) === '[object Array]'\n}\n","import L from 'leaflet'\n\nimport {\n  isArray\n} from './util'\n\n/**\n * Track class\n */\nexport const Track = L.Class.extend({\n\n  initialize: function (trackData = [], options) {\n    L.setOptions(this, options)\n\n    trackData.forEach(item => {\n      // Add isOrigin field to identify whether it is an original sampling point, to distinguish from interpolation points\n      item.isOrigin = true\n    })\n    this._trackPoints = trackData\n    this._timeTick = {}\n    this._update()\n  },\n\n  addTrackPoint: function (trackPoint) {\n    if (isArray(trackPoint)) {\n      for (let i = 0, len = trackPoint.length; i < len; i++) {\n        this.addTrackPoint(trackPoint[i])\n      }\n    }\n    this._addTrackPoint(trackPoint)\n  },\n\n  getTimes: function () {\n    const times = []\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\n      times.push(this._trackPoints[i].time)\n    }\n    return times\n  },\n\n  getStartTrackPoint: function () {\n    return this._trackPoints[0]\n  },\n\n  getEndTrackPoint: function () {\n    return this._trackPoints[this._trackPoints.length - 1]\n  },\n\n  getTrackPointByTime: function (time) {\n    return this._trackPoints[this._timeTick[time]]\n  },\n\n  _getCalculateTrackPointByTime: function (time) {\n    // First check if the last point is an original point\n    let endpoint = this.getTrackPointByTime(time)\n    let startPt = this.getStartTrackPoint()\n    let endPt = this.getEndTrackPoint()\n    const times = this.getTimes()\n    if (time < startPt.time || time > endPt.time) return\n    let left = 0\n    let right = times.length - 1\n    let n\n    // Handle the case of only one point\n    if (left === right) {\n      return endpoint\n    }\n    // Use binary search to find the time interval containing the current time\n    while (right - left !== 1) {\n      n = parseInt((left + right) / 2)\n      if (time > times[n]) left = n\n      else right = n\n    }\n\n    const t0 = times[left]\n    const t1 = times[right]\n    const t = time\n    const p0 = this.getTrackPointByTime(t0)\n    const p1 = this.getTrackPointByTime(t1)\n    startPt = L.point(p0.lng, p0.lat)\n    endPt = L.point(p1.lng, p1.lat)\n    const s = startPt.distanceTo(endPt)\n    // Case where different times are at the same point\n    if (s <= 0) {\n      endpoint = p1\n      return endpoint\n    }\n    // Assume the target moves at a constant speed in a straight line between two points\n    // Calculate the velocity vector and the target position at time t\n    const v = s / (t1 - t0)\n    const sinx = (endPt.y - startPt.y) / s\n    const cosx = (endPt.x - startPt.x) / s\n    const step = v * (t - t0)\n    const x = startPt.x + step * cosx\n    const y = startPt.y + step * sinx\n    // Calculate the direction of movement, 0-360 degrees\n    const dir = endPt.x >= startPt.x ? (Math.PI * 0.5 - Math.asin(sinx)) * 180 / Math.PI : (Math.PI * 1.5 + Math.asin(sinx)) * 180 / Math.PI\n\n    if (endpoint) {\n      if (endpoint.dir === undefined) {\n        endpoint.dir = dir\n      }\n    } else {\n      endpoint = {\n        lng: x,\n        lat: y,\n        dir: endPt.dir || dir,\n        isOrigin: false,\n        time,\n        color: p0.color, // Copy color property from the starting point\n        info: p0.info // Copy info property from the starting point to preserve other information\n      }\n    }\n    return endpoint\n  },\n\n  // Get the track points before a specific time\n  getTrackPointsBeforeTime: function (time) {\n    const tpoints = []\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\n      if (this._trackPoints[i].time < time) {\n        tpoints.push(this._trackPoints[i])\n      }\n    }\n    // Get the last point, derived from linear interpolation by time\n    const endPt = this._getCalculateTrackPointByTime(time)\n    if (endPt) {\n      tpoints.push(endPt)\n    }\n    return tpoints\n  },\n\n  _addTrackPoint: function (trackPoint) {\n    trackPoint.isOrigin = true\n    this._trackPoints.push(trackPoint)\n    this._update()\n  },\n\n  _update: function () {\n    this._sortTrackPointsByTime()\n    this._updatetimeTick()\n  },\n\n  // Sort track points by time using bubble sort\n  _sortTrackPointsByTime: function () {\n    const len = this._trackPoints.length\n    for (let i = 0; i < len; i++) {\n      for (let j = 0; j < len - 1 - i; j++) {\n        if (this._trackPoints[j].time > this._trackPoints[j + 1].time) {\n          const tmp = this._trackPoints[j + 1]\n          this._trackPoints[j + 1] = this._trackPoints[j]\n          this._trackPoints[j] = tmp\n        }\n      }\n    }\n  },\n\n  // Create time index for track points to optimize search performance\n  _updatetimeTick: function () {\n    this._timeTick = {}\n    for (let i = 0, len = this._trackPoints.length; i < len; i++) {\n      this._timeTick[this._trackPoints[i].time] = i\n    }\n  }\n})\n\nexport const track = function (trackData, options) {\n  return new Track(trackData, options)\n}\n","import L from 'leaflet'\n\nimport {\n  isArray\n} from './util'\nimport {\n  Track\n} from './track'\n\n/**\n * Controller class\n * Controls tracks and drawing\n */\nexport const TrackController = L.Class.extend({\n\n  initialize: function (tracks = [], draw, options) {\n    L.setOptions(this, options)\n\n    this._tracks = []\n    this.addTrack(tracks)\n\n    this._draw = draw\n\n    this._updateTime()\n  },\n\n  getMinTime: function () {\n    return this._minTime\n  },\n\n  getMaxTime: function () {\n    return this._maxTime\n  },\n\n  addTrack: function (track) {\n    if (isArray(track)) {\n      for (let i = 0, len = track.length; i < len; i++) {\n        this.addTrack(track[i])\n      }\n    } else if (track instanceof Track) {\n      this._tracks.push(track)\n      this._updateTime()\n    } else {\n      throw new Error('tracks must be an instance of `Track` or an array of `Track` instance!')\n    }\n  },\n\n  drawTracksByTime: function (time) {\n    this._draw.clear()\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\n      const track = this._tracks[i]\n      const tps = track.getTrackPointsBeforeTime(time)\n      if (tps && tps.length) this._draw.drawTrack(tps)\n    }\n  },\n\n  _updateTime: function () {\n    this._minTime = this._tracks[0].getStartTrackPoint().time\n    this._maxTime = this._tracks[0].getEndTrackPoint().time\n    for (let i = 0, len = this._tracks.length; i < len; i++) {\n      const stime = this._tracks[i].getStartTrackPoint().time\n      const etime = this._tracks[i].getEndTrackPoint().time\n      if (stime < this._minTime) {\n        this._minTime = stime\n      }\n      if (etime > this._maxTime) {\n        this._maxTime = etime\n      }\n    }\n  }\n\n})\n\nexport const trackController = function (tracks, draw, options) {\n  return new TrackController(tracks, draw, options)\n}\n","import L from 'leaflet'\n/**\n * Clock class, controls track playback animation\n */\nexport const Clock = L.Class.extend({\n\n  includes: L.Evented.prototype,\n\n  options: {\n    // Playback speed\n    // Calculation method: fpstime * Math.pow(2, this._speed - 1)\n    speed: 10,\n    // Maximum playback speed\n    maxSpeed: 10\n  },\n\n  initialize: function (trackController, options) {\n    L.setOptions(this, options)\n\n    this._trackController = trackController\n    this._endTime = this._trackController.getMaxTime()\n    this._curTime = this._trackController.getMinTime()\n    this._speed = this.options.speed\n    this._maxSpeed = this.options.maxSpeed\n    this._intervalID = null\n    this._lastFpsUpdateTime = 0\n  },\n\n  start: function () {\n    if (this._intervalID) return\n    this._intervalID = L.Util.requestAnimFrame(this._tick, this)\n  },\n\n  stop: function () {\n    if (!this._intervalID) return\n    L.Util.cancelAnimFrame(this._intervalID)\n    this._intervalID = null\n    this._lastFpsUpdateTime = 0\n  },\n\n  rePlaying: function () {\n    this.stop()\n    this._curTime = this._trackController.getMinTime()\n    this.start()\n  },\n\n  slowSpeed: function () {\n    this._speed = this._speed <= 1 ? this._speed : this._speed - 1\n    if (this._intervalID) {\n      this.stop()\n      this.start()\n    }\n  },\n\n  quickSpeed: function () {\n    this._speed = this._speed >= this._maxSpeed ? this._speed : this._speed + 1\n    if (this._intervalID) {\n      this.stop()\n      this.start()\n    }\n  },\n\n  getSpeed: function () {\n    return this._speed\n  },\n\n  getCurTime: function () {\n    return this._curTime\n  },\n\n  getStartTime: function () {\n    return this._trackController.getMinTime()\n  },\n\n  getEndTime: function () {\n    return this._trackController.getMaxTime()\n  },\n\n  isPlaying: function () {\n    return !!this._intervalID\n  },\n\n  setCursor: function (time) {\n    this._curTime = time\n    this._trackController.drawTracksByTime(this._curTime)\n    this.fire('tick', {\n      time: this._curTime\n    })\n  },\n\n  setSpeed: function (speed) {\n    this._speed = speed\n    if (this._intervalID) {\n      this.stop()\n      this.start()\n    }\n  },\n\n  // Calculate time interval between two frames, unit: seconds\n  _caculatefpsTime: function (now) {\n    let time\n    if (this._lastFpsUpdateTime === 0) {\n      time = 0\n    } else {\n      time = now - this._lastFpsUpdateTime\n    }\n    this._lastFpsUpdateTime = now\n    // Convert milliseconds to seconds\n    time = time / 1000\n    return time\n  },\n\n  _tick: function () {\n    const now = +new Date()\n    const fpstime = this._caculatefpsTime(now)\n    let isPause = false\n    const stepTime = fpstime * Math.pow(2, this._speed - 1)\n    this._curTime += stepTime\n    if (this._curTime >= this._endTime) {\n      this._curTime = this._endTime\n      isPause = true\n    }\n    this._trackController.drawTracksByTime(this._curTime)\n    this.fire('tick', {\n      time: this._curTime\n    })\n    if (!isPause) this._intervalID = L.Util.requestAnimFrame(this._tick, this)\n  }\n})\n\nexport const clock = function (trackController, options) {\n  return new Clock(trackController, options)\n}\n","import L from 'leaflet'\n\n/**\n * Track layer\n */\nexport const TrackLayer = L.Renderer.extend({\n\n  initialize: function (options) {\n    L.Renderer.prototype.initialize.call(this, options)\n    this.options.padding = 0.1\n  },\n\n  onAdd: function (map) {\n    this._container = L.DomUtil.create('canvas', 'leaflet-zoom-animated')\n\n    const pane = map.getPane(this.options.pane)\n    pane.appendChild(this._container)\n\n    this._ctx = this._container.getContext('2d')\n\n    this._update()\n  },\n\n  onRemove: function (map) {\n    L.DomUtil.remove(this._container)\n  },\n\n  getContainer: function () {\n    return this._container\n  },\n\n  getBounds: function () {\n    return this._bounds\n  },\n\n  _update: function () {\n    if (this._map._animatingZoom && this._bounds) {\n      return\n    }\n\n    L.Renderer.prototype._update.call(this)\n\n    const b = this._bounds\n\n    const container = this._container\n\n    const size = b.getSize()\n\n    const m = L.Browser.retina ? 2 : 1\n\n    L.DomUtil.setPosition(container, b.min)\n\n    // set canvas size (also clearing it); use double size on retina\n    container.width = m * size.x\n    container.height = m * size.y\n    container.style.width = size.x + 'px'\n    container.style.height = size.y + 'px'\n\n    if (L.Browser.retina) {\n      this._ctx.scale(2, 2)\n    }\n\n    // translate so we use the same path coordinates after canvas element moves\n    this._ctx.translate(-b.min.x, -b.min.y)\n\n    // Tell paths to redraw themselves\n    this.fire('update')\n  }\n})\n","import L from 'leaflet'\n\nimport { TrackLayer } from './tracklayer'\n\n/**\n * Drawing class\n * Handles the drawing of track lines, track points, and target objects\n */\nexport const Draw = L.Class.extend({\n\n  trackPointOptions: {\n    isDraw: false,\n    useCanvas: true,\n    stroke: false,\n    color: '#ef0300',\n    fill: true,\n    fillColor: '#ef0300',\n    opacity: 0.3,\n    radius: 4\n  },\n  trackLineOptions: {\n    isDraw: false,\n    stroke: true,\n    color: '#1C54E2', // stroke color\n    weight: 2,\n    fill: false,\n    fillColor: '#000',\n    opacity: 0.3\n  },\n  targetOptions: {\n    useImg: false,\n    imgUrl: '../../static/images/ship.png',\n    showText: false,\n    width: 8,\n    height: 18,\n    color: '#00f', // stroke color\n    fillColor: '#9FD12D'\n  },\n  toolTipOptions: {\n    offset: [0, 0],\n    direction: 'top',\n    permanent: false\n  },\n\n  initialize: function (map, options) {\n    L.extend(this.trackPointOptions, options.trackPointOptions)\n    L.extend(this.trackLineOptions, options.trackLineOptions)\n    L.extend(this.targetOptions, options.targetOptions)\n    L.extend(this.toolTipOptions, options.toolTipOptions)\n\n    this._showTrackPoint = this.trackPointOptions.isDraw\n    this._showTrackLine = this.trackLineOptions.isDraw\n\n    this._map = map\n    this._map.on('mousemove', this._onmousemoveEvt, this)\n\n    this._trackLayer = new TrackLayer().addTo(map)\n    this._trackLayer.on('update', this._trackLayerUpdate, this)\n\n    this._canvas = this._trackLayer.getContainer()\n    this._ctx = this._canvas.getContext('2d')\n\n    this._bufferTracks = []\n\n    if (!this.trackPointOptions.useCanvas) {\n      this._trackPointFeatureGroup = L.featureGroup([]).addTo(map)\n    }\n\n    // If target uses an image, load it first\n    if (this.targetOptions.useImg) {\n      const img = new Image()\n      img.onload = () => {\n        this._targetImg = img\n      }\n      img.onerror = () => {\n        throw new Error('img load error!')\n      }\n      img.src = this.targetOptions.imgUrl\n    }\n  },\n\n  update: function () {\n    this._trackLayerUpdate()\n  },\n\n  drawTrack: function (trackpoints) {\n    this._bufferTracks.push(trackpoints)\n    this._drawTrack(trackpoints)\n  },\n\n  showTrackPoint: function () {\n    this._showTrackPoint = true\n    this.update()\n  },\n\n  hideTrackPoint: function () {\n    this._showTrackPoint = false\n    this.update()\n  },\n\n  showTrackLine: function () {\n    this._showTrackLine = true\n    this.update()\n  },\n\n  hideTrackLine: function () {\n    this._showTrackLine = false\n    this.update()\n  },\n\n  remove: function () {\n    this._bufferTracks = []\n    this._trackLayer.off('update', this._trackLayerUpdate, this)\n    this._map.off('mousemove', this._onmousemoveEvt, this)\n    if (this._map.hasLayer(this._trackLayer)) {\n      this._map.removeLayer(this._trackLayer)\n    }\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\n      this._map.removeLayer(this._trackPointFeatureGroup)\n    }\n  },\n\n  clear: function () {\n    this._clearLayer()\n    this._bufferTracks = []\n  },\n\n  _trackLayerUpdate: function () {\n    if (this._bufferTracks.length) {\n      this._clearLayer()\n      this._bufferTracks.forEach(function (element) {\n        this._drawTrack(element)\n      }.bind(this))\n    }\n  },\n\n  _onmousemoveEvt: function (e) {\n    if (!this._showTrackPoint) {\n      return\n    }\n    const point = e.layerPoint\n    if (this._bufferTracks.length) {\n      for (let i = 0, leni = this._bufferTracks.length; i < leni; i++) {\n        for (let j = 0, len = this._bufferTracks[i].length; j < len; j++) {\n          const tpoint = this._getLayerPoint(this._bufferTracks[i][j])\n          if (point.distanceTo(tpoint) <= this.trackPointOptions.radius) {\n            this._opentoolTip(this._bufferTracks[i][j])\n            return\n          }\n        }\n      }\n    }\n    if (this._map.hasLayer(this._tooltip)) {\n      this._map.removeLayer(this._tooltip)\n    }\n    this._canvas.style.cursor = 'pointer'\n  },\n\n  _opentoolTip: function (trackpoint) {\n    if (this._map.hasLayer(this._tooltip)) {\n      this._map.removeLayer(this._tooltip)\n    }\n    this._canvas.style.cursor = 'default'\n    const latlng = L.latLng(trackpoint.lat, trackpoint.lng)\n    const tooltip = this._tooltip = L.tooltip(this.toolTipOptions)\n    tooltip.setLatLng(latlng)\n    tooltip.addTo(this._map)\n    tooltip.setContent(this._getTooltipText(trackpoint))\n  },\n\n  _drawTrack: function (trackpoints) {\n    // Draw track line\n    if (this._showTrackLine) {\n      this._drawTrackLine(trackpoints)\n    }\n    // Draw ship\n    const targetPoint = trackpoints[trackpoints.length - 1]\n    if (this.targetOptions.useImg && this._targetImg) {\n      this._drawShipImage(targetPoint)\n    } else {\n      this._drawShipCanvas(targetPoint)\n    }\n    // Draw label information\n    if (this.targetOptions.showText) {\n      this._drawtxt(`Heading: ${parseInt(targetPoint.dir)}°`, targetPoint)\n    }\n    // Draw track points that have been passed\n    if (this._showTrackPoint) {\n      if (this.trackPointOptions.useCanvas) {\n        this._drawTrackPointsCanvas(trackpoints)\n      } else {\n        this._drawTrackPointsSvg(trackpoints)\n      }\n    }\n  },\n\n  _drawTrackLine: function (trackpoints) {\n    const options = this.trackLineOptions\n    const tp0 = this._getLayerPoint(trackpoints[0])\n    this._ctx.save()\n    this._ctx.beginPath()\n    // Draw track line\n    this._ctx.moveTo(tp0.x, tp0.y)\n    for (let i = 1, len = trackpoints.length; i < len; i++) {\n      const tpi = this._getLayerPoint(trackpoints[i])\n      this._ctx.lineTo(tpi.x, tpi.y)\n    }\n    this._ctx.globalAlpha = options.opacity\n    if (options.stroke) {\n      // Use direct color property if available, otherwise use default green or options color\n      this._ctx.strokeStyle = trackpoints[0].color !== undefined ? trackpoints[0].color : ('#00FF00')\n      this._ctx.lineWidth = options.weight\n      this._ctx.stroke()\n    }\n    if (options.fill) {\n      this._ctx.fillStyle = options.fillColor\n      this._ctx.fill()\n    }\n    this._ctx.restore()\n  },\n\n  _drawTrackPointsCanvas: function (trackpoints) {\n    const options = this.trackPointOptions\n    this._ctx.save()\n\n    // Use direct color property if available, otherwise use default green or options color\n    const trackColor = trackpoints[0].color !== undefined ? trackpoints[0].color : ('#00FF00')\n    const trackFillColor = trackpoints[0].color !== undefined ? trackpoints[0].color : ('#00FF00')\n\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\n      if (trackpoints[i].isOrigin) {\n        const latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\n        const radius = options.radius\n        const point = this._map.latLngToLayerPoint(latLng)\n        this._ctx.beginPath()\n        this._ctx.arc(point.x, point.y, radius, 0, Math.PI * 2, false)\n        this._ctx.globalAlpha = options.opacity\n        if (options.stroke) {\n          this._ctx.strokeStyle = trackColor\n          this._ctx.stroke()\n        }\n        if (options.fill) {\n          this._ctx.fillStyle = trackFillColor\n          this._ctx.fill()\n        }\n      }\n    }\n    this._ctx.restore()\n  },\n\n  _drawTrackPointsSvg: function (trackpoints) {\n    for (let i = 0, len = trackpoints.length; i < len; i++) {\n      if (trackpoints[i].isOrigin) {\n        const latLng = L.latLng(trackpoints[i].lat, trackpoints[i].lng)\n        const cricleMarker = L.circleMarker(latLng, this.trackPointOptions)\n        cricleMarker.bindTooltip(this._getTooltipText(trackpoints[i]), this.toolTipOptions)\n        this._trackPointFeatureGroup.addLayer(cricleMarker)\n      }\n    }\n  },\n\n  _drawtxt: function (text, trackpoint) {\n    const point = this._getLayerPoint(trackpoint)\n    this._ctx.save()\n    this._ctx.font = '12px Verdana'\n    this._ctx.fillStyle = '#000'\n    this._ctx.textAlign = 'center'\n    this._ctx.textBaseline = 'bottom'\n    this._ctx.fillText(text, point.x, point.y - 12, 200)\n    this._ctx.restore()\n  },\n\n  _drawShipCanvas: function (trackpoint) {\n    const point = this._getLayerPoint(trackpoint)\n    const rotate = trackpoint.dir || 0\n    const w = this.targetOptions.width\n    const h = this.targetOptions.height\n    const dh = h / 3\n\n    // Use direct color property if available, otherwise use default green or options color\n    const shipColor = '#000000'\n    const shipFillColor = trackpoint.color !== undefined ? trackpoint.color : ('#00FF00')\n\n    this._ctx.save()\n    this._ctx.fillStyle = shipFillColor\n    this._ctx.strokeStyle = shipColor\n    this._ctx.translate(point.x, point.y)\n    this._ctx.rotate((Math.PI / 180) * rotate)\n    this._ctx.beginPath()\n    this._ctx.moveTo(0, 0 - h / 2)\n    this._ctx.lineTo(0 - w / 2, 0 - h / 2 + dh)\n    this._ctx.lineTo(0 - w / 2, h / 2)\n    this._ctx.lineTo(w / 2, h / 2)\n    this._ctx.lineTo(w / 2, 0 - h / 2 + dh)\n    this._ctx.closePath()\n    this._ctx.fill()\n    this._ctx.stroke()\n    this._ctx.restore()\n  },\n\n  _drawShipImage: function (trackpoint) {\n    const point = this._getLayerPoint(trackpoint)\n    const dir = trackpoint.dir || 0\n    const width = this.targetOptions.width\n    const height = this.targetOptions.height\n    const offset = {\n      x: width / 2,\n      y: height / 2\n    }\n    this._ctx.save()\n    this._ctx.translate(point.x, point.y)\n    this._ctx.rotate((Math.PI / 180) * dir)\n    this._ctx.drawImage(this._targetImg, 0 - offset.x, 0 - offset.y, width, height)\n    this._ctx.restore()\n  },\n\n  _getTooltipText: function (targetobj) {\n    let content = []\n    content.push('<table>')\n    if (targetobj.info && targetobj.info.length) {\n      for (let i = 0, len = targetobj.info.length; i < len; i++) {\n        content.push('<tr>')\n        content.push('<td>' + targetobj.info[i].key + '</td>')\n        content.push('<td>' + targetobj.info[i].value + '</td>')\n        content.push('</tr>')\n      }\n    }\n    content.push('</table>')\n    content = content.join('')\n    return content\n  },\n\n  _clearLayer: function () {\n    const bounds = this._trackLayer.getBounds()\n    if (bounds) {\n      const size = bounds.getSize()\n      this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y)\n    } else {\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height)\n    }\n    if (this._map.hasLayer(this._trackPointFeatureGroup)) {\n      this._trackPointFeatureGroup.clearLayers()\n    }\n  },\n\n  _getLayerPoint (trackpoint) {\n    return this._map.latLngToLayerPoint(L.latLng(trackpoint.lat, trackpoint.lng))\n  }\n})\n\nexport const draw = function (map, options) {\n  return new Draw(map, options)\n}\n","import L from 'leaflet'\n\nimport {\n  Track\n} from './track'\nimport {\n  TrackController\n} from './trackcontroller'\nimport {\n  Clock\n} from './clock'\nimport {\n  Draw\n} from './draw'\nimport * as Util from './util'\n\n/**\n * single track data\n * [{lat: 30, lng: 116, time: 1502529980, heading: 300, info:[]},{},....]\n *\n * mutiple track data\n * [single track data, single track data, single track data]\n */\nexport const TrackPlayBack = L.Class.extend({\n\n  includes: L.Evented.prototype,\n\n  initialize: function (data, map, options = {}) {\n    const drawOptions = {\n      trackPointOptions: options.trackPointOptions,\n      trackLineOptions: options.trackLineOptions,\n      targetOptions: options.targetOptions,\n      toolTipOptions: options.toolTipOptions\n    }\n    this.tracks = this._initTracks(data)\n    this.draw = new Draw(map, drawOptions)\n    this.trackController = new TrackController(this.tracks, this.draw)\n    this.clock = new Clock(this.trackController, options.clockOptions)\n\n    // Draw tracks immediately with initial time to show pointers without delay\n    this.trackController.drawTracksByTime(this.clock.getCurTime())\n\n    this.clock.on('tick', this._tick, this)\n  },\n  start: function () {\n    this.clock.start()\n    return this\n  },\n  stop: function () {\n    this.clock.stop()\n    return this\n  },\n  rePlaying: function () {\n    this.clock.rePlaying()\n    return this\n  },\n  slowSpeed: function () {\n    this.clock.slowSpeed()\n    return this\n  },\n  quickSpeed: function () {\n    this.clock.quickSpeed()\n    return this\n  },\n  getSpeed: function () {\n    return this.clock.getSpeed()\n  },\n  getCurTime: function () {\n    return this.clock.getCurTime()\n  },\n  getStartTime: function () {\n    return this.clock.getStartTime()\n  },\n  getEndTime: function () {\n    return this.clock.getEndTime()\n  },\n  isPlaying: function () {\n    return this.clock.isPlaying()\n  },\n  setCursor: function (time) {\n    this.clock.setCursor(time)\n    return this\n  },\n  setSpeed: function (speed) {\n    this.clock.setSpeed(speed)\n    return this\n  },\n  showTrackPoint: function () {\n    this.draw.showTrackPoint()\n    return this\n  },\n  hideTrackPoint: function () {\n    this.draw.hideTrackPoint()\n    return this\n  },\n  showTrackLine: function () {\n    this.draw.showTrackLine()\n    return this\n  },\n  hideTrackLine: function () {\n    this.draw.hideTrackLine()\n    return this\n  },\n  dispose: function () {\n    this.clock.off('tick', this._tick)\n    this.draw.remove()\n    this.tracks = null\n    this.draw = null\n    this.trackController = null\n    this.clock = null\n  },\n  _tick: function (e) {\n    this.fire('tick', e)\n  },\n  _initTracks: function (data) {\n    const tracks = []\n    if (Util.isArray(data)) {\n      if (Util.isArray(data[0])) {\n        // Multiple tracks\n        for (let i = 0, len = data.length; i < len; i++) {\n          tracks.push(new Track(data[i]))\n        }\n      } else {\n        // Single track\n        tracks.push(new Track(data))\n      }\n    }\n    return tracks\n  }\n})\n\nexport const trackplayback = function (data, map, options) {\n  return new TrackPlayBack(data, map, options)\n}\n","import L from 'leaflet'\n\nimport {\n  TrackPlayBack,\n  trackplayback\n} from './trackplayback'\n\nL.TrackPlayBack = TrackPlayBack\nL.trackplayback = trackplayback\n"],"names":["root","factory","exports","module","require","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__421__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","isArray","arr","Array","toString","Track","extend","initialize","trackData","options","this","forEach","item","isOrigin","_trackPoints","_timeTick","_update","addTrackPoint","trackPoint","len","length","_addTrackPoint","getTimes","times","push","time","getStartTrackPoint","getEndTrackPoint","getTrackPointByTime","_getCalculateTrackPointByTime","endpoint","startPt","endPt","left","right","parseInt","t0","t1","t","p0","p1","lng","lat","s","distanceTo","v","sinx","y","cosx","x","step","dir","Math","PI","asin","color","info","getTrackPointsBeforeTime","tpoints","_sortTrackPointsByTime","_updatetimeTick","j","tmp","TrackController","tracks","draw","_tracks","addTrack","_draw","_updateTime","getMinTime","_minTime","getMaxTime","_maxTime","track","Error","drawTracksByTime","clear","tps","drawTrack","stime","etime","Clock","includes","speed","maxSpeed","trackController","_trackController","_endTime","_curTime","_speed","_maxSpeed","_intervalID","_lastFpsUpdateTime","start","requestAnimFrame","_tick","stop","cancelAnimFrame","rePlaying","slowSpeed","quickSpeed","getSpeed","getCurTime","getStartTime","getEndTime","isPlaying","setCursor","fire","setSpeed","_caculatefpsTime","now","Date","isPause","stepTime","pow","TrackLayer","padding","onAdd","map","_container","create","getPane","pane","appendChild","_ctx","getContext","onRemove","remove","getContainer","getBounds","_bounds","_map","_animatingZoom","b","container","size","getSize","m","retina","setPosition","min","width","height","style","scale","translate","Draw","trackPointOptions","isDraw","useCanvas","stroke","fill","fillColor","opacity","radius","trackLineOptions","weight","targetOptions","useImg","imgUrl","showText","toolTipOptions","offset","direction","permanent","_showTrackPoint","_showTrackLine","on","_onmousemoveEvt","_trackLayer","addTo","_trackLayerUpdate","_canvas","_bufferTracks","_trackPointFeatureGroup","img","Image","onload","_targetImg","onerror","src","update","trackpoints","_drawTrack","showTrackPoint","hideTrackPoint","showTrackLine","hideTrackLine","off","hasLayer","removeLayer","_clearLayer","element","bind","e","point","layerPoint","leni","tpoint","_getLayerPoint","_opentoolTip","_tooltip","cursor","trackpoint","latlng","tooltip","setLatLng","setContent","_getTooltipText","_drawTrackLine","targetPoint","_drawShipImage","_drawShipCanvas","_drawtxt","_drawTrackPointsCanvas","_drawTrackPointsSvg","tp0","save","beginPath","moveTo","tpi","lineTo","globalAlpha","strokeStyle","lineWidth","fillStyle","restore","trackColor","trackFillColor","latLng","latLngToLayerPoint","arc","cricleMarker","bindTooltip","addLayer","text","font","textAlign","textBaseline","fillText","rotate","w","h","dh","shipFillColor","closePath","drawImage","targetobj","content","value","join","bounds","clearRect","clearLayers","TrackPlayBack","data","drawOptions","_initTracks","clock","clockOptions","dispose"],"sourceRoot":""}